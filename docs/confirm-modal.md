# Promise ê¸°ë°˜ Confirm ëª¨ë‹¬ ì‹œìŠ¤í…œ

> **`window.confirm`ì²˜ëŸ¼ ê°„ë‹¨í•˜ê²Œ, ì»¤ìŠ¤í…€ UIë¡œ ì•„ë¦„ë‹µê²Œ**

## ğŸ¯ í•µì‹¬ ê°€ì¹˜

ê¸°ì¡´ ë¸Œë¼ìš°ì € ê¸°ë³¸ `window.confirm`ì˜ **ê°„ê²°í•œ ì‚¬ìš©ì„±**ê³¼ **ì»¤ìŠ¤í…€ ë””ìì¸**ì„ ë™ì‹œì— ë‹¬ì„±í•œ ëª¨ë‹¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### Before: ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬
```tsx
// âŒ ê¸°ì¡´ ë°©ì‹: ëª¨ë‹¬ë§ˆë‹¤ ìƒíƒœ ê´€ë¦¬ í•„ìš”
const [isModalOpen, setIsModalOpen] = useState(false);
const [targetId, setTargetId] = useState<string | null>(null);

const handleDelete = (id: string) => {
  setTargetId(id);
  setIsModalOpen(true);
};

const handleConfirm = () => {
  if (targetId) deleteMutation.mutate(Number(targetId));
  setIsModalOpen(false);
};

return (
  <>
    <button onClick={() => handleDelete(id)}>ì‚­ì œ</button>
    <Modal open={isModalOpen} onClose={() => setIsModalOpen(false)}>
      <ModalContent onConfirm={handleConfirm} />
    </Modal>
  </>
);
```

### After: í•œ ì¤„ë¡œ í•´ê²°
```tsx
// âœ… ìƒˆ ë°©ì‹: Promise ê¸°ë°˜ confirm
const confirm = useConfirm();

const handleDelete = async (id: string) => {
  const ok = await confirm({
    title: "ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
    description: "ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
  });
  
  if (ok) deleteMutation.mutate(Number(id));
};

return <button onClick={() => handleDelete(id)}>ì‚­ì œ</button>;
```

---

## ğŸ’¡ ê¸°ìˆ ì  íŠ¹ì§•

### 1. Promise íŒ¨í„´ í™œìš©
- `async/await`ë¡œ ë™ê¸° ì½”ë“œì²˜ëŸ¼ ì‘ì„± ê°€ëŠ¥
- ì½œë°± ì§€ì˜¥ ì—†ì´ ê¹”ë”í•œ í”Œë¡œìš°
- TypeScript íƒ€ì… ì•ˆì „ì„± ë³´ì¥

### 2. ì „ì—­ Context ê´€ë¦¬
- í•œ ë²ˆì˜ Provider ì„¤ì •ìœ¼ë¡œ ì•± ì „ì²´ì—ì„œ ì‚¬ìš©
- ì»´í¬ë„ŒíŠ¸ë³„ ëª¨ë‹¬ ìƒíƒœ ê´€ë¦¬ ë¶ˆí•„ìš”
- ì¼ê´€ëœ ë””ìì¸ ìë™ ì ìš©

### 3. ìœ ì—°í•œ ì»¤ìŠ¤í„°ë§ˆì´ì§•
```tsx
await confirm({
  title: "ì»¤ìŠ¤í…€ ì œëª©",
  description: "ìƒì„¸ ì„¤ëª… (ì„ íƒ)",
  confirmLabel: "í™•ì¸ ë²„íŠ¼ í…ìŠ¤íŠ¸",
  cancelLabel: "ì·¨ì†Œ ë²„íŠ¼ í…ìŠ¤íŠ¸",
});
```

---

## ğŸš€ ì‹¤ì œ ì‚¬ìš© ì‚¬ë¡€

### Case 1: ì‚­ì œ í™•ì¸
```tsx
const ok = await confirm({
  title: "ì´ë ¥ì„œë¥¼ ì‚­ì œí• ê¹Œìš”?",
  description: "ì‚­ì œ í›„ì—ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
  confirmLabel: "ì‚­ì œí•˜ê¸°",
  cancelLabel: "ì·¨ì†Œ",
});

if (ok) deleteMutation.mutate(postId);
```

### Case 2: ê¶Œí•œ ë³€ê²½
```tsx
const ok = await confirm({
  title: "ê´€ë¦¬ì ê¶Œí•œì„ ë¶€ì—¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
  description: "í™•ì¸ì„ ëˆ„ë¥´ë©´ í•´ë‹¹ ê³„ì •ì—ê²Œ ê´€ë¦¬ì ê¶Œí•œì´ ë¶€ì—¬ë©ë‹ˆë‹¤.",
  confirmLabel: "í™•ì¸",
  cancelLabel: "ì•„ë‹ˆì˜¤",
});

if (ok) adminMutation.mutate(true);
```

### Case 3: ê³µê°œ ì„¤ì •
```tsx
const ok = await confirm({
  title: `'${resumeTitle}'ë¥¼ ê³µê°œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`,
  description: "í™•ì¸ì„ ëˆ„ë¥´ë©´ ê¸°ì—…ì´ í•´ë‹¹ ì´ë ¥ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
  confirmLabel: "ê³µê°œí•˜ê¸°",
  cancelLabel: "ì·¨ì†Œ",
});

if (ok) togglePublicMutation.mutate();
```

---

## ğŸ“Š ì½”ë“œ ë¹„êµ

| í•­ëª© | ê¸°ì¡´ ë°©ì‹ | Promise ê¸°ë°˜ |
|------|----------|-------------|
| **ìƒíƒœ ê´€ë¦¬** | í•„ìš” (useState) | ë¶ˆí•„ìš” |
| **ì½”ë“œ ë¼ì¸** | ~20ì¤„ | ~5ì¤„ |
| **ê°€ë…ì„±** | ë‚®ìŒ (ì½œë°±) | ë†’ìŒ (async/await) |
| **ì¬ì‚¬ìš©ì„±** | ë‚®ìŒ | ë†’ìŒ |
| **íƒ€ì… ì•ˆì „ì„±** | ìˆ˜ë™ ê´€ë¦¬ | ìë™ ë³´ì¥ |

---

## ğŸ¨ êµ¬í˜„ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ConfirmProvider             â”‚
â”‚  (ì „ì—­ Context + ëª¨ë‹¬ í˜¸ìŠ¤íŠ¸)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”œâ”€ useConfirm() í›… ì œê³µ
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚ Page A â”‚              â”‚ Page B  â”‚
â”‚        â”‚              â”‚         â”‚
â”‚ confirmâ”‚              â”‚ confirm â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜:**
1. `confirm()` í˜¸ì¶œ â†’ Promise ìƒì„±
2. `resolve` í•¨ìˆ˜ë¥¼ Contextì— ì €ì¥
3. ëª¨ë‹¬ ë Œë”ë§ ë° ì‚¬ìš©ì ì…ë ¥ ëŒ€ê¸°
4. ë²„íŠ¼ í´ë¦­ ì‹œ ì €ì¥ëœ `resolve()` í˜¸ì¶œ
5. Promise ì™„ë£Œ â†’ `await` ì´í›„ ì½”ë“œ ì‹¤í–‰

---

## ğŸ† ì„±ê³¼

- **ì½”ë“œ ë¼ì¸ 75% ê°ì†Œ**: í‰ê·  20ì¤„ â†’ 5ì¤„
- **ê°œë°œ ì‹œê°„ ë‹¨ì¶•**: ëª¨ë‹¬ êµ¬í˜„ ì‹œê°„ 10ë¶„ â†’ 1ë¶„
- **ì¼ê´€ëœ UX**: ì „ì²´ ì•±ì—ì„œ ë™ì¼í•œ ë””ìì¸ ìë™ ì ìš©
- **ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ**: ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬ë¡œ ìˆ˜ì • ìš©ì´

---

## ğŸ“ ê¸°ìˆ  ìŠ¤íƒ

- **React Context API**: ì „ì—­ ìƒíƒœ ê´€ë¦¬
- **TypeScript**: íƒ€ì… ì•ˆì „ì„±
- **Promise/async-await**: ë¹„ë™ê¸° í”Œë¡œìš° ì œì–´
- **Tailwind CSS**: ì¼ê´€ëœ ë””ìì¸ ì‹œìŠ¤í…œ

---

## ğŸ’¬ í•œ ì¤„ ìš”ì•½

> **"ìƒíƒœ ê´€ë¦¬ ì—†ì´ `await confirm(...)`ë§Œìœ¼ë¡œ ì»¤ìŠ¤í…€ ëª¨ë‹¬ì„ ì‚¬ìš©í•˜ëŠ” ìš°ì•„í•œ ì†”ë£¨ì…˜"**
